angular.module("md.data.table",[]).controller("mdDataTableController",["$scope",function(a){var b=this;b.allSelected=function(b){return b?b.length===a.select.length:!1},b.isSelected=function(b){return-1!==a.select.indexOf(b)},b.toggleRow=function(b){this.isSelected(b)?a.select.splice(scope.select.indexOf(b),1):a.select.push(b)},b.toggleAll=function(c){b.allSelected(c)?a.select.splice(0):angular.forEach(c,function(c){b.isSelected(c)||a.select.push(c)})}}]),angular.module("md.data.table").directive("mdDataTable",["$compile","$parse",function(a,b){"use strict";function c(c,d,e,f){function g(){this.row=d.find("thead").find("tr")}function h(){this.rows=d.find("tbody").find("tr"),this.column=function(a,b){angular.forEach(this.rows,function(c){b(c.children[a])})}}function i(){if(e.mdFilter)o=b(e.mdFilter);else{var a=n.rows.attr("ng-repeat").split(" "),c=a.indexOf("orderBy:")+1;o=b(a[c])}}function j(a,b){var c=a.attributes.unit||{value:void 0},d=a.attributes.precision||{value:0};a.style.textAlign="right",n.column(b,function(a){a.style.textAlign="right",a.innerHTML=parseInt(a.innerHTML).toFixed(d.value),a.attributes.hasOwnProperty("show-unit")&&(a.innerHTML+=c.value)})}function k(){m.row.children().addClass("trim animate"),d.css("width","auto"),d.css({"min-width":d.prop("scrollWidth")+"px",width:"100%","table-layout":"fixed"})}function l(b){var d=b.attributes["order-by"]||{value:b.textContent.toLowerCase()};b.setAttribute("order-by",d.value),b.setAttribute("ng-class","{'md-active': isActive('"+d.value+"')}"),b.setAttribute("ng-click","filterBy('"+d.value+"')"),a(b)(c)}var m,n,o;c.orderBy=function(a){o.assign(c,o(c)===a?"-"+a:a)},c.filterBy=function(a){c.filter(o=o===a?"-"+a:a)},c.isActive=function(a){},f.ready=function(){m=new g,n=new h,e.hasOwnProperty("mdRowSelect")&&b(e.mdRowSelect).assign(c,c.select),e.hasOwnProperty("trimColumnNames")&&k(),e.hasOwnProperty("mdColumnSort")&&i(),angular.forEach(m.row.children(),function(a,b){e.hasOwnProperty("mdRowSelect")&&0===b||(e.hasOwnProperty("mdColumnSort")&&l(a),a.attributes.numeric&&j(a,b),e.hasOwnProperty("trimColumnNames")&&(a.innerHTML="<div>"+a.innerHTML+"</div>"))})}}function d(a,b){function d(a){for(this.value=a,this.tokens=this.value.split(" "),this._iterator=0,this.current=function(){return this.tokens[this._iterator]},this.getNext=function(){return this.tokens[++this._iterator]},this.hasNext=function(){return this._iterator<this.tokens.length-1},this.item=this.current();this.hasNext()&&"in"!==this.getNext();)this.item+=this.current();for(this.items=this.getNext();this.hasNext()&&-1===["|","track"].indexOf(this.getNext());)this.items+=this.current();this.orderBy="",this.hasNext()&&"orderBy:"===this.getNext()&&(this.orderBy+=this.getNext())}function e(a){var b=a.indexOf("track");return-1===b?a+" | orderBy: order":a.slice(0,b)+" | orderBy: order "+a.slice(b)}var f={row:a.find("thead").find("tr")},g={row:a.find("tbody").find("tr")};if(g.row.attr("ng-repeat")){var h=new d(g.row.attr("ng-repeat"));b.hasOwnProperty("mdRowSelect")&&(f.checkbox=angular.element("<md-checkbox></md-checkbox>"),g.checkbox=angular.element("<md-checkbox></md-checkbox>"),f.checkbox.attr("aria-label","Select All"),f.checkbox.attr("ng-click","toggleAll("+h.items+")"),f.checkbox.attr("ng-class","{'md-checked': allSelected("+h.items+")}"),g.checkbox.attr("aria-label","Select Row"),g.checkbox.attr("ng-click","toggleRow("+h.item+")"),g.checkbox.attr("ng-class","{'md-checked': isSelected("+h.item+")}"),f.row.prepend(angular.element("<th></th>").append(f.checkbox)),g.row.prepend(angular.element("<td></td>").append(g.checkbox))),b.hasOwnProperty("mdColumnSort")&&(b.mdFilter||h.orderBy||g.row.attr("ng-repeat",e(h.value))),g.row.attr("md-table-repeat","")}return c}return{restrict:"A",scope:{filter:"=mdFilter",select:"=mdRowSelect"},compile:d,controller:"mdDataTableController"}}]),angular.module("md.data.table").directive("mdTableBody",function(){"use strict";return{require:"^mdDataTable",link:function(a,b,c,d){a.toggleRow=d.toggleRow,a.isSelected=d.isSelected}}}).directive("mdTableRepeat",function(){return{require:"^mdDataTable",link:function(a,b,c,d){a.$last&&d.ready()}}}).directive("mdTableHead",function(){return{require:"^mdDataTable",link:function(a,b,c,d){a.toggleAll=d.toggleAll,a.allSelected=d.allSelected}}});