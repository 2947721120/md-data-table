angular.module("md.data.table",[]).directive("mdDataTable",["$compile","$timeout",function(a,b){"use strict";function c(c,d,e){function f(b,d){return a(angular.element("<md-checkbox></md-checkbox>").attr("aria-label",b).attr("ng-click","$event.stopPropagation()").attr("ng-model",d))(c)}function g(a,b){c.select[a.id]=void 0!==b?b:!c.select[a.id]}function h(a){c.order=c.order===a?"-"+a:a}function i(){this.row=d.find("thead").find("tr"),this.toggleAll=function(){angular.forEach(o.rows,function(a){g(a,c.selectAll)})},this.enableRowSelect=function(){var a=f("Toggle All","selectAll").on("click",this.toggleAll);this.row.prepend(angular.element("<th></th>").append(a))}}function j(){this.rows=d.find("tbody").find("tr"),this.column=function(a,b){angular.forEach(this.rows,function(c){b(c.children[a])})},this.enableRowSelect=function(){c.select=[],angular.forEach(this.rows,function(a,b){a.id=b,c.select.push(!1);var d=f("Toggle Row","select["+b+"]");angular.element(a).prepend(angular.element("<td></td>").append(d)),a.addEventListener("click",function(){c.$apply(g(this))})})}}function k(){d.css("width","auto"),d.css({"min-width":d.prop("scrollWidth")+"px",width:"100%","table-layout":"fixed"})}function l(){n=new i,o=new j,e.hasOwnProperty("trimColumnNames")&&k(),e.hasOwnProperty("mdRowSelect")&&(n.enableRowSelect(),o.enableRowSelect()),angular.forEach(n.row.children(),function(a,b){if(o.rows.attr("ng-repeat")&&(a.attributes["order-by"]||a.setAttribute("order-by",a.textContent.toLowerCase()),a.addEventListener("click",function(){c.$apply(h(this.attributes["order-by"].value))})),a.attributes.numeric){var d=a.attributes.unit||{value:void 0},e=a.attributes.precision||{value:0};a.style.textAlign="right",d.value&&(a.innerHTML+=" ("+d.value+")"),o.column(b,function(a){a.style.textAlign="right",a.innerHTML=parseInt(a.innerHTML).toFixed(e.value),a.attributes.hasOwnProperty("show-unit")&&(a.innerHTML+=d.value)})}})}function m(){return d.find("tbody").children().length}var n,o,p=c.$watch(m,function(a){a&&(p(),b(l))})}function d(a){var b=a.find("tbody").find("tr");return b.attr("ng-repeat")&&b.attr("ng-repeat",b.attr("ng-repeat")+" | orderBy: order"),c}return{scope:!0,restrict:"A",compile:d}}]);