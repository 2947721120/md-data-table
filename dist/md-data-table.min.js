angular.module("md.data.table",[]).directive("mdDataTable",["$compile","$timeout",function(a,b){"use strict";function c(c,d,e,f,g){function h(b,d){return a(angular.element("<md-checkbox></md-checkbox>").attr("aria-label",b).attr("ng-click","$event.stopPropagation()").attr("ng-model",d))(c)}function i(a,b){c.select[a.id]=void 0!==b?b:!c.select[a.id]}function j(a){c.order=c.order===a?"-"+a:a}function k(){this.row=d.find("thead").find("tr"),this.toggleAll=function(){angular.forEach(p.rows,function(a){i(a,c.selectAll)})},this.enableRowSelect=function(){var a=h("Toggle All","selectAll").on("click",this.toggleAll);this.row.prepend(angular.element("<th></th>").append(a))}}function l(){this.rows=d.find("tbody").find("tr"),this.column=function(a,b){angular.forEach(this.rows,function(c){b(c.children[a])})},this.enableRowSelect=function(){c.select=[],angular.forEach(this.rows,function(a,b){a.id=b,c.select.push(!1);var d=h("Toggle Row","select["+b+"]");angular.element(a).prepend(angular.element("<td></td>").append(d)),a.addEventListener("click",function(){c.$apply(i(this))})})}}function m(){o=new k,p=new l,e.hasOwnProperty("mdRowSelect")&&(o.enableRowSelect(),p.enableRowSelect()),angular.forEach(o.row.children(),function(a,b){if(p.rows.attr("ng-repeat")&&a.addEventListener("click",function(){c.$apply(j(this.attributes["order-by"].value))}),a.attributes.numeric){var d=a.attributes.unit||{value:void 0},e=a.attributes.precision||{value:0};a.style.textAlign="right",d.value&&(a.innerHTML+=" ("+d.value+")"),p.column(b,function(a){a.style.textAlign="right",a.innerHTML=parseInt(a.innerHTML).toFixed(e.value),a.attributes.hasOwnProperty("show-unit")&&(a.innerHTML+=d.value)})}})}function n(){return d.find("tbody").children().length}var o,p;g(function(a){d.wrap("<md-data-table-container></md-data-table-container>").append(a)});var q=c.$watch(n,function(a){a&&(q(),b(m))})}function d(a){var b=a.find("tbody").find("tr"),d={cells:a.find("th")};return b.attr("ng-repeat")&&(b.attr("ng-repeat",b.attr("ng-repeat")+" | orderBy: order"),angular.forEach(d.cells,function(a){a.attributes["order-by"]||a.setAttribute("order-by",a.textContent.toLowerCase())})),c}return{scope:!0,restrict:"A",transclude:!0,compile:d}}]);