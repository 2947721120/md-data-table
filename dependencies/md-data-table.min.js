angular.module("md.data.table",[]).directive("mdDataTable",["$compile","$timeout",function(a,b){"use strict";function c(c,d,e){function f(b,d){return a(angular.element("<md-checkbox></md-checkbox>").attr("aria-label",b).attr("ng-click","$event.stopPropagation()").attr("ng-model",d))(c)}function g(a,b){c.select[a.id]=void 0!==b?b:!c.select[a.id]}function h(){this.row=d.find("thead").find("tr"),this.toggleAll=function(){angular.forEach(p.rows,function(a){g(a,c.selectAll)})},this.enableRowSelect=function(){var a=f("Toggle All","selectAll").on("click",this.toggleAll);this.row.prepend(angular.element("<th></th>").append(a))}}function i(){this.rows=d.find("tbody").find("tr"),this.column=function(a,b){angular.forEach(this.rows,function(c){b(c.children[a])})},this.enableRowSelect=function(){c.select=[],angular.forEach(this.rows,function(a,b){a.id=b,c.select.push(!1);var d=f("Toggle Row","select["+b+"]");angular.element(a).prepend(angular.element("<td></td>").append(d)),a.addEventListener("click",function(){c.$apply(g(this))})})}}function j(a,b){var c=a.attributes.unit||{value:void 0},d=a.attributes.precision||{value:0};a.style.textAlign="right",c.value&&(a.innerHTML+=" ("+c.value+")"),p.column(b,function(a){a.style.textAlign="right",a.innerHTML=parseInt(a.innerHTML).toFixed(d.value),a.attributes.hasOwnProperty("show-unit")&&(a.innerHTML+=c.value)})}function k(){d.css("width","auto"),d.css({"min-width":d.prop("scrollWidth")+"px",width:"100%","table-layout":"fixed"})}function l(b){var d=b.attributes["order-by"]||{value:b.textContent.toLowerCase()};b.setAttribute("order-by",d.value),b.setAttribute("ng-class","{'md-active': isActive('"+d.value+"')}"),b.setAttribute("ng-click","setOrder('"+d.value+"')"),a(b)(c)}function m(){o=new h,p=new i,e.hasOwnProperty("trimColumnNames")&&k(),e.hasOwnProperty("mdRowSelect")&&(o.enableRowSelect(),p.enableRowSelect()),angular.forEach(o.row.children(),function(a,b){e.hasOwnProperty("mdRowSelect")&&0===b||(p.rows.attr("ng-repeat")&&l(a),a.attributes.numeric&&j(a,b),e.hasOwnProperty("trimColumnNames")&&(a.innerHTML="<div>"+a.innerHTML+"</div>",a.classList.add("animate")))})}function n(){return d.find("tbody").children().length}var o,p;c.setOrder=function(a){c.order=c.order===a?"-"+a:a},c.isActive=function(a){return c.order===a||c.order==="-"+a};var q=c.$watch(n,function(a){a&&(q(),b(m))})}function d(a){var b=a.find("tbody").find("tr");return b.attr("ng-repeat")&&b.attr("ng-repeat",b.attr("ng-repeat")+" | orderBy: order"),c}return{scope:!0,restrict:"A",compile:d}}]);